# Custom PostgreSQL configuration for archivum-postgre
# This file extends the default PostgreSQL configuration

# Shared preload libraries - required for pg_stat_statements
shared_preload_libraries = 'pg_stat_statements'

# pg_stat_statements configuration
pg_stat_statements.max = 10000
pg_stat_statements.track = all

# Performance tuning (adjust based on your system)
# These are conservative defaults - tune based on available RAM
shared_buffers = 256MB
effective_cache_size = 1GB
maintenance_work_mem = 64MB
checkpoint_completion_target = 0.9
wal_buffers = 16MB
default_statistics_target = 100
random_page_cost = 1.1  # Lower for SSD storage
effective_io_concurrency = 200  # Higher for SSD storage

# Connection settings
max_connections = 200

# Logging (useful for debugging, can be reduced in production)
log_destination = 'stderr'
logging_collector = off
log_min_duration_statement = 1000  # Log queries slower than 1 second
log_line_prefix = '%m [%p] %q%u@%d '

# Autovacuum tuning
autovacuum = on
autovacuum_max_workers = 3
autovacuum_naptime = 1min
